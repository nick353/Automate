# Workflow Dashboard - ローカルエージェント

ダッシュボードからリモートでデスクトップを自動操作するためのローカルエージェントです。

## 🚀 クイックスタート

### 1. 依存パッケージのインストール

```bash
cd local-agent
pip install -r requirements.txt
```

### 2. OAGI APIキーの設定

```bash
export OAGI_API_KEY="your-api-key"
```

APIキーは [developer.agiopen.org](https://developer.agiopen.org/) で取得できます。

### 3. 権限チェック（macOS）

```bash
python agent_client.py --check
```

必要な権限:
- **画面収録**: システム環境設定 → プライバシー → 画面収録
- **アクセシビリティ**: システム環境設定 → プライバシー → アクセシビリティ

### 4. エージェントを起動

```bash
# ローカルサーバーに接続
python agent_client.py --server http://localhost:8000

# リモートサーバーに接続
python agent_client.py --server https://your-server.com
```

## 📋 使い方

1. **エージェントを起動**すると、サーバーに接続されます
2. **ダッシュボードでタスクを作成**し、「試運転」ボタンをクリック
3. **リアルタイムで実行を確認**できます
4. **問題なければタスクを登録**

## 🖥️ 画面イメージ

```
╔═══════════════════════════════════════════════════════════════╗
║       Workflow Dashboard - Local Agent Client v1.0.0          ║
╚═══════════════════════════════════════════════════════════════╝

📦 依存パッケージチェック...
✅ OAGI SDK: インストール済み
✅ OAGI API Key: 設定済み (abc12345...)

📱 プラットフォーム: Darwin

macOS権限チェック:
✅ 画面収録: 許可済み
✅ アクセシビリティ: 許可済み

==================================================
サーバー: http://localhost:8000
エージェントID: a1b2c3d4
==================================================
✅ サーバーに接続しました

🎧 サーバーからの指示を待機中...
   Ctrl+C で終了
--------------------------------------------------
🚀 試運転開始
   ID: trial123
   タイプ: desktop
   タスク: Googleで天気を検索...
   ステップ 1: ブラウザを開く...
   ステップ 2: 検索ボックスをクリック...
✅ 試運転完了
```

## ⚙️ オプション

| オプション | 説明 | デフォルト |
|-----------|------|-----------|
| `--server URL` | サーバーのURL | `http://localhost:8000` |
| `--agent-id ID` | エージェントID | 自動生成 |
| `--check` | 権限チェックのみ | - |

## 🔧 トラブルシューティング

### エージェントが接続できない

```bash
# サーバーが起動しているか確認
curl http://localhost:8000/health
```

### 画面収録の権限エラー

macOS:
1. システム環境設定を開く
2. セキュリティとプライバシー → プライバシー → 画面収録
3. ターミナル（またはPythonを実行しているアプリ）にチェック
4. アプリを再起動

### OAGI SDKのエラー

```bash
# SDKを再インストール
pip install --upgrade oagi
```

## 📁 ファイル構成

```
local-agent/
├── agent_client.py    # メインスクリプト
├── requirements.txt   # 依存パッケージ
└── README.md          # このファイル
```



