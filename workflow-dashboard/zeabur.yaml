apiVersion: zeabur.com/v1
kind: Template
metadata:
  name: workflow-dashboard
spec:
  description: Browser Useã‚’ä½¿ã£ãŸè‡ªç„¶è¨€èªAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç®¡ç†ãƒ»å¯è¦–åŒ–ã™ã‚‹Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ 
  icon: https://zeabur.com/logo.png
  tags:
    - web
    - automation
    - ai
  readme: |
    # Workflow Dashboard
    
    Browser Useã‚’ä½¿ã£ãŸè‡ªç„¶è¨€èªAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç®¡ç†ãƒ»å¯è¦–åŒ–ã™ã‚‹Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ 
    
    ## æ©Ÿèƒ½
    
    - ğŸ¤– **è‡ªç„¶è¨€èªã§ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•åŒ–**: AIã«æŒ‡ç¤ºã™ã‚‹ã ã‘ã§ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œã‚’è‡ªå‹•å®Ÿè¡Œ
    - ğŸ“º **ãƒ©ã‚¤ãƒ–ãƒ“ãƒ¥ãƒ¼**: å®Ÿè¡Œä¸­ã®ã‚¿ã‚¹ã‚¯ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç›£è¦–ï¼ˆã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ + ãƒ­ã‚°ï¼‰
    - ğŸ” **èªè¨¼æƒ…å ±ç®¡ç†**: APIã‚­ãƒ¼ãƒ»ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚’æš—å·åŒ–ã—ã¦å®‰å…¨ã«ä¿å­˜
    - â° **ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œ**: cronå½¢å¼ã§ã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•å®Ÿè¡Œ
    - ğŸ“Š **å®Ÿè¡Œå±¥æ­´**: å…¨ã¦ã®å®Ÿè¡Œçµæœã‚’è¨˜éŒ²ãƒ»é–²è¦§
    
    ## ç’°å¢ƒå¤‰æ•°
    
    å¿…é ˆã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š
    
    - `ENCRYPTION_KEY`: èªè¨¼æƒ…å ±ã®æš—å·åŒ–ã‚­ãƒ¼ï¼ˆå¿…é ˆï¼‰
    - `ANTHROPIC_API_KEY`: Anthropic APIã‚­ãƒ¼ï¼ˆæ¨å¥¨ï¼‰
    - `DATABASE_URL`: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šURLï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: SQLiteï¼‰
    
  variables:
    - name: ENCRYPTION_KEY
      description: èªè¨¼æƒ…å ±ã®æš—å·åŒ–ã‚­ãƒ¼ï¼ˆå¿…é ˆï¼‰
      type: STRING
      key: ENCRYPTION_KEY
      required: true
    - name: ANTHROPIC_API_KEY
      description: Anthropic APIã‚­ãƒ¼
      type: STRING
      key: ANTHROPIC_API_KEY
      required: false
    - name: DATABASE_URL
      description: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šURLï¼ˆPostgreSQLæ¨å¥¨ï¼‰
      type: STRING
      key: DATABASE_URL
      required: false
  
  services:
    - name: backend
      icon: https://www.python.org/static/favicon.ico
      template: GIT
      spec:
        git:
          type: GITHUB
          repoID: ${ZEABUR_GIT_REPO_ID}
          branch: ${ZEABUR_GIT_BRANCH:-main}
          rootDirectory: workflow-dashboard/backend
        build:
          dockerfile: Dockerfile
        ports:
          - name: http
            port: 8000
            protocol: TCP
            expose: true
        environment:
          - name: DATABASE_URL
            value: ${DATABASE_URL:-sqlite:///./data/workflow.db}
          - name: ENCRYPTION_KEY
            value: ${ENCRYPTION_KEY}
          - name: IN_DOCKER
            value: "True"
          - name: ANTHROPIC_API_KEY
            value: ${ANTHROPIC_API_KEY}
          - name: GOOGLE_API_KEY
            value: ${GOOGLE_API_KEY:-}
          - name: BROWSER_USE_API_KEY
            value: ${BROWSER_USE_API_KEY:-}
          - name: OAGI_API_KEY
            value: ${OAGI_API_KEY:-}
          - name: SUPABASE_URL
            value: ${SUPABASE_URL:-https://vyvarctfzslbthdbsmvd.supabase.co}
          - name: SUPABASE_ANON_KEY
            value: ${SUPABASE_ANON_KEY:-eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ5dmFyY3RmenNsYnRoZGJzbXZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4NDU1NjcsImV4cCI6MjA4MDQyMTU2N30.FZDTrLLeFrou-ZYSOhegGkHIe0mqDYS_ne9pginpYE8}
        resources:
          cpu: 2000
          memory: 4096
        healthcheck:
          path: /health
          port: 8000
          interval: 30
          timeout: 10
          retries: 3
    
    - name: frontend
      icon: https://react.dev/favicon.ico
      template: GIT
      spec:
        git:
          type: GITHUB
          repoID: ${ZEABUR_GIT_REPO_ID}
          branch: ${ZEABUR_GIT_BRANCH:-main}
          rootDirectory: workflow-dashboard/frontend
        build:
          dockerfile: Dockerfile
        ports:
          - name: http
            port: 80
            protocol: TCP
            expose: true
        environment:
          - name: BACKEND_URL
            value: ${backend.URL}
        dependencies:
          - backend
        domainKey: APP_DOMAIN
